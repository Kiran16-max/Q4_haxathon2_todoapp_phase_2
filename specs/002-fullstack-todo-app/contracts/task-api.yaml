# API Contracts: Full-Stack Todo Web Application

## Authentication API

### POST /api/auth/register
**Description**: Register a new user account
**Request Body**:
```json
{
  "email": "string (required)",
  "name": "string (optional)",
  "password": "string (required, min 8 chars)"
}
```
**Response (201)**:
```json
{
  "id": "UUID",
  "email": "string",
  "name": "string",
  "created_at": "ISO datetime"
}
```
**Errors**: 400 (validation error), 409 (email already exists)

### POST /api/auth/login
**Description**: Authenticate user and return JWT token
**Request Body**:
```json
{
  "email": "string (required)",
  "password": "string (required)"
}
```
**Response (200)**:
```json
{
  "access_token": "JWT string",
  "token_type": "bearer",
  "user": {
    "id": "UUID",
    "email": "string",
    "name": "string"
  }
}
```
**Errors**: 400 (invalid credentials), 401 (unauthorized)

## Task Management API

### GET /api/tasks
**Description**: Get all tasks for the authenticated user
**Headers**: Authorization: Bearer {token}
**Response (200)**:
```json
[
  {
    "id": "UUID",
    "title": "string",
    "description": "string (nullable)",
    "completed": "boolean",
    "created_at": "ISO datetime",
    "updated_at": "ISO datetime"
  }
]
```
**Errors**: 401 (unauthorized)

### POST /api/tasks
**Description**: Create a new task for the authenticated user
**Headers**: Authorization: Bearer {token}
**Request Body**:
```json
{
  "title": "string (required)",
  "description": "string (optional)",
  "completed": "boolean (optional, default: false)"
}
```
**Response (201)**:
```json
{
  "id": "UUID",
  "title": "string",
  "description": "string (nullable)",
  "completed": "boolean",
  "created_at": "ISO datetime",
  "updated_at": "ISO datetime"
}
```
**Errors**: 400 (validation error), 401 (unauthorized)

### GET /api/tasks/{id}
**Description**: Get a specific task by ID
**Headers**: Authorization: Bearer {token}
**Response (200)**:
```json
{
  "id": "UUID",
  "title": "string",
  "description": "string (nullable)",
  "completed": "boolean",
  "created_at": "ISO datetime",
  "updated_at": "ISO datetime"
}
```
**Errors**: 401 (unauthorized), 404 (not found)

### PUT /api/tasks/{id}
**Description**: Update a specific task
**Headers**: Authorization: Bearer {token}
**Request Body**:
```json
{
  "title": "string (optional)",
  "description": "string (optional)",
  "completed": "boolean (optional)"
}
```
**Response (200)**:
```json
{
  "id": "UUID",
  "title": "string",
  "description": "string (nullable)",
  "completed": "boolean",
  "created_at": "ISO datetime",
  "updated_at": "ISO datetime"
}
```
**Errors**: 400 (validation error), 401 (unauthorized), 404 (not found)

### DELETE /api/tasks/{id}
**Description**: Delete a specific task
**Headers**: Authorization: Bearer {token}
**Response (204)**: No content
**Errors**: 401 (unauthorized), 404 (not found)

### PATCH /api/tasks/{id}/complete
**Description**: Toggle the completion status of a task
**Headers**: Authorization: Bearer {token}
**Response (200)**:
```json
{
  "id": "UUID",
  "completed": "boolean"
}
```
**Errors**: 401 (unauthorized), 404 (not found)

## AI Chatbot API

### POST /api/chat
**Description**: Send a message to the AI chatbot and receive a response
**Headers**: Authorization: Bearer {token}
**Request Body**:
```json
{
  "message": "string (required)",
  "conversation_id": "UUID (optional)"
}
```
**Response (200)**:
```json
{
  "response": "string",
  "conversation_id": "UUID",
  "tool_used": "string (optional, e.g., 'add_task', 'list_tasks')"
}
```
**Errors**: 401 (unauthorized), 429 (rate limit exceeded)